{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nimport { isPrimitive as isNumber } from '@stdlib/assert-is-number';\nimport { isPrimitive as isInteger } from '@stdlib/assert-is-integer';\nimport { isPrimitive as isBoolean } from '@stdlib/assert-is-boolean';\nimport isComplexLike from '@stdlib/assert-is-complex-like';\nimport isComplexDataType from '@stdlib/ndarray-base-assert-is-complex-floating-point-data-type';\nimport isBooleanDataType from '@stdlib/ndarray-base-assert-is-boolean-data-type';\nimport isRealFloatingDataType from '@stdlib/ndarray-base-assert-is-real-floating-point-data-type';\nimport isUnsignedIntegerDataType from '@stdlib/ndarray-base-assert-is-unsigned-integer-data-type';\nimport isSignedIntegerDataType from '@stdlib/ndarray-base-assert-is-signed-integer-data-type';\nimport isSafeCast from '@stdlib/ndarray-base-assert-is-safe-data-type-cast';\nimport minDataType from '@stdlib/ndarray-min-dtype';\nimport minSignedIntegerDataType from '@stdlib/ndarray-base-min-signed-integer-dtype';\nimport format from '@stdlib/error-tools-fmtprodmsg';\n\n\n// FUNCTIONS //\n\n/**\n* Verifies whether a provided value can be safely cast to a \"generic\" or unknown data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - data type\n* @returns {boolean} boolean result\n*\n* @example\n* var out = validateGeneric( 3, 'generic' );\n* // returns true\n*/\nfunction validateGeneric() {\n\treturn true;\n}\n\n/**\n* Verifies whether a provided value can be safely cast to a boolean data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - data type\n* @returns {boolean} boolean result\n*\n* @example\n* var out = validateBoolean( true, 'bool' );\n* // returns true\n*\n* @example\n* import Complex128 from '@stdlib/complex-float64-ctor';\n*\n* var out = validateBoolean( new Complex128( 5.0, 6.0 ), 'bool' );\n* // returns false\n*/\nfunction validateBoolean( value ) {\n\treturn isBoolean( value );\n}\n\n/**\n* Verifies whether a provided value can be safely cast to a real-valued floating-point data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - data type\n* @returns {boolean} boolean result\n*\n* @example\n* var out = validateRealFloating( 3.14, 'float64' );\n* // returns true\n*\n* @example\n* import Complex128 from '@stdlib/complex-float64-ctor';\n*\n* var out = validateRealFloating( new Complex128( 5.0, 6.0 ), 'float64' );\n* // returns false\n*/\nfunction validateRealFloating( value ) {\n\treturn isNumber( value );\n}\n\n/**\n* Verifies whether a provided value can be safely cast to a complex-valued floating-point data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - data type\n* @returns {boolean} boolean result\n*\n* @example\n* import Complex128 from '@stdlib/complex-float64-ctor';\n*\n* var out = validateComplexFloating( new Complex128( 5.0, 6.0 ), 'complex128' );\n* // returns true\n*\n* @example\n* var out = validateComplexFloating( {}, 'complex128' );\n* // returns false\n*/\nfunction validateComplexFloating( value ) {\n\treturn ( isNumber( value ) || isComplexLike( value ) );\n}\n\n/**\n* Verifies whether a provided value can be safely cast to a signed integer data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - data type\n* @returns {boolean} boolean result\n*\n* @example\n* var out = validateSignedInteger( 3, 'int32' );\n* // returns true\n*\n* @example\n* var out = validateSignedInteger( 3.14, 'int32' );\n* // returns false\n*/\nfunction validateSignedInteger( value, dtype ) {\n\treturn ( isInteger( value ) && isSafeCast( minSignedIntegerDataType( value ), dtype ) ); // eslint-disable-line max-len\n}\n\n/**\n* Verifies whether a provided value can be safely cast to an unsigned integer data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - array data type\n* @returns {boolean} boolean result\n*\n* @example\n* var out = validateUnsignedInteger( 3, 'uint32' );\n* // returns true\n*\n* @example\n* var out = validateUnsignedInteger( -3, 'uint32' );\n* // returns false\n*/\nfunction validateUnsignedInteger( value, dtype ) {\n\treturn ( isInteger( value ) && isSafeCast( minDataType( value ), dtype ) );\n}\n\n/**\n* Verifies whether a provided value can be safely cast to a binary data type.\n*\n* @private\n* @param {*} value - input value\n* @param {string} dtype - array data type\n* @returns {boolean} boolean result\n*\n* @example\n* var out = validateBinary( 3, 'binary' );\n* // returns true\n*\n* @example\n* var out = validateBinary( -3, 'binary' );\n* // returns false\n*/\nfunction validateBinary( value ) {\n\treturn ( isInteger( value ) && minDataType( value ) === 'uint8' );\n}\n\n\n// MAIN //\n\n/**\n* Returns a boolean indicating whether a scalar value can be safely cast or, for floating-point data types, downcast to specified ndarray data type.\n*\n* @param {*} value - scalar value\n* @param {string} dtype - ndarray data type\n* @throws {TypeError} second argument must be a supported data type\n* @returns {boolean} boolean indicating whether a scalar value can be safely cast\n*\n* @example\n* var bool = isScalarMostlySafeCompatible( 3.0, 'float64' );\n* // returns true\n*\n* @example\n* var bool = isScalarMostlySafeCompatible( 3.14, 'int32' );\n* // returns false\n*\n* @example\n* var bool = isScalarMostlySafeCompatible( -1, 'uint32' );\n* // returns false\n*/\nfunction isScalarMostlySafeCompatible( value, dtype ) { // eslint-disable-line id-length\n\tif ( dtype === 'generic' ) {\n\t\treturn validateGeneric( value, dtype );\n\t}\n\tif ( dtype === 'binary' ) {\n\t\treturn validateBinary( value, dtype );\n\t}\n\tif ( isRealFloatingDataType( dtype ) ) {\n\t\treturn validateRealFloating( value, dtype );\n\t}\n\tif ( isUnsignedIntegerDataType( dtype ) ) {\n\t\treturn validateUnsignedInteger( value, dtype );\n\t}\n\tif ( isSignedIntegerDataType( dtype ) ) {\n\t\treturn validateSignedInteger( value, dtype );\n\t}\n\tif ( isBooleanDataType( dtype ) ) {\n\t\treturn validateBoolean( value, dtype );\n\t}\n\tif ( isComplexDataType( dtype ) ) {\n\t\treturn validateComplexFloating( value, dtype );\n\t}\n\tthrow new TypeError( format( 'nullEC', dtype ) );\n}\n\n\n// EXPORTS //\n\nexport default isScalarMostlySafeCompatible;\n"],"names":["isScalarMostlySafeCompatible","value","dtype","isInteger","minDataType","validateBinary","isRealFloatingDataType","isNumber","validateRealFloating","isUnsignedIntegerDataType","isSafeCast","validateUnsignedInteger","isSignedIntegerDataType","minSignedIntegerDataType","validateSignedInteger","isBooleanDataType","isBoolean","validateBoolean","isComplexDataType","isComplexLike","validateComplexFloating","TypeError","format"],"mappings":";;s6CA4MA,SAASA,EAA8BC,EAAOC,GAC7C,GAAe,YAAVA,EACJ,OA1JM,EA4JP,GAAe,WAAVA,EACJ,OAhCF,SAAyBD,GACxB,OAASE,EAAWF,IAAoC,UAAzBG,EAAaH,EAC7C,CA8BSI,CAAgBJ,GAExB,GAAKK,EAAwBJ,GAC5B,OArHF,SAA+BD,GAC9B,OAAOM,EAAUN,EAClB,CAmHSO,CAAsBP,GAE9B,GAAKQ,EAA2BP,GAC/B,OA1DF,SAAkCD,EAAOC,GACxC,OAASC,EAAWF,IAAWS,EAAYN,EAAaH,GAASC,EAClE,CAwDSS,CAAyBV,EAAOC,GAExC,GAAKU,EAAyBV,GAC7B,OAjFF,SAAgCD,EAAOC,GACtC,OAASC,EAAWF,IAAWS,EAAYG,EAA0BZ,GAASC,EAC/E,CA+ESY,CAAuBb,EAAOC,GAEtC,GAAKa,EAAmBb,GACvB,OApJF,SAA0BD,GACzB,OAAOe,EAAWf,EACnB,CAkJSgB,CAAiBhB,GAEzB,GAAKiB,EAAmBhB,GACvB,OA3GF,SAAkCD,GACjC,OAASM,EAAUN,IAAWkB,EAAelB,EAC9C,CAyGSmB,CAAyBnB,GAEjC,MAAM,IAAIoB,UAAWC,EAAQ,SAAUpB,GACxC"}